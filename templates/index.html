
<!DOCTYPE html>
<html lang="en-GB">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Fat Loss That Actually Makes Sense</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Poppins:wght@400;500;600;700&display=swap" rel="stylesheet" />
  <style>
    * { box-sizing: border-box; margin: 0; padding: 0; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
      background-color: #ffffff;
      color: #1a1a1a;
      line-height: 1.6;
      font-weight: 400;
    }

    header {
      background: #ffffff;
      padding: 60px 20px 80px;
      text-align: center;
      border-bottom: 1px solid #f5f5f5;
    }

    header h1 {
      font-family: 'Poppins', sans-serif;
      font-size: 3.5rem;
      font-weight: 700;
      margin-bottom: 24px;
      color: #1a1a1a;
      letter-spacing: -0.02em;
      line-height: 1.1;
    }

    header p {
      font-size: 1.25rem;
      max-width: 720px;
      margin: 0 auto 40px;
      color: #4a4a4a;
      font-weight: 400;
      line-height: 1.5;
    }

    .cta-buttons {
      margin-top: 40px;
      display: flex;
      gap: 16px;
      justify-content: center;
      flex-wrap: wrap;
    }

    .cta-buttons .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 16px 32px;
      border-radius: 12px;
      text-decoration: none;
      font-weight: 600;
      font-size: 1rem;
      transition: all 0.2s ease;
      border: 2px solid transparent;
      font-family: 'Inter', sans-serif;
    }

    .btn-primary {
      background-color: #2DD4BF;
      color: white;
      box-shadow: 0 4px 12px rgba(45, 212, 191, 0.3);
    }

    .btn-primary:hover {
      background-color: #14B8A6;
      transform: translateY(-1px);
      box-shadow: 0 6px 16px rgba(45, 212, 191, 0.4);
    }

    .btn-secondary {
      background-color: #ffffff;
      color: #1a1a1a;
      border: 2px solid #2DD4BF;
      box-shadow: 0 2px 8px rgba(45, 212, 191, 0.15);
    }

    .btn-secondary:hover {
      background-color: #2DD4BF;
      color: white;
      border-color: #2DD4BF;
      box-shadow: 0 4px 12px rgba(45, 212, 191, 0.25);
    }

    section {
      padding: 80px 20px;
      max-width: 1200px;
      margin: auto;
    }

    section h2 {
      font-family: 'Poppins', sans-serif;
      font-size: 2.5rem;
      margin-bottom: 24px;
      text-align: center;
      color: #1a1a1a;
      font-weight: 600;
      letter-spacing: -0.01em;
    }

    .section-subtitle {
      text-align: center;
      font-size: 1.2rem;
      margin-bottom: 60px;
      max-width: 800px;
      margin-left: auto;
      margin-right: auto;
      color: #6b7280;
      line-height: 1.6;
    }

    .features-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 40px;
      margin: 60px 0;
    }

    .feature-card {
      background: #ffffff;
      padding: 40px 32px;
      border-radius: 20px;
      text-align: left;
      border: 1px solid #f0f0f0;
      transition: all 0.3s ease;
      position: relative;
    }

    .feature-card:hover {
      transform: translateY(-4px);
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.1);
      border-color: #e5e5e5;
    }

    .feature-card .icon {
      font-size: 3rem;
      margin-bottom: 24px;
      display: block;
    }

    .feature-card h3 {
      font-family: 'Poppins', sans-serif;
      font-size: 1.5rem;
      margin-bottom: 16px;
      color: #1a1a1a;
      font-weight: 600;
    }

    .feature-card p {
      color: #6b7280;
      line-height: 1.6;
      font-size: 1rem;
    }

    .scores-section {
      background: #fafafa;
      border-top: 1px solid #f0f0f0;
      border-bottom: 1px solid #f0f0f0;
    }

    .scores-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: 32px;
      max-width: 1000px;
      margin: 40px auto 0;
    }

    .score-card {
      background: white;
      padding: 32px 24px;
      border-radius: 16px;
      text-align: center;
      border: 1px solid #f0f0f0;
      transition: all 0.3s ease;
    }

    .score-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 12px 24px rgba(0, 0, 0, 0.08);
    }

    .score-card .icon {
      font-size: 2.5rem;
      margin-bottom: 16px;
      display: block;
    }

    .score-card h3 {
      font-family: 'Poppins', sans-serif;
      font-size: 1.25rem;
      margin-bottom: 12px;
      color: #1a1a1a;
      font-weight: 600;
    }

    .score-card p {
      color: #6b7280;
      line-height: 1.5;
    }

    .comparison-section {
      background: #ffffff;
    }

    .comparison-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 48px;
      max-width: 1000px;
      margin: 40px auto 0;
    }

    .comparison-card {
      background: white;
      padding: 40px 32px;
      border-radius: 20px;
      border: 1px solid #f0f0f0;
    }

    .comparison-card h3 {
      font-family: 'Poppins', sans-serif;
      margin-bottom: 24px;
      font-size: 1.5rem;
      font-weight: 600;
    }

    .frustrations h3 { color: #ef4444; }
    .solutions h3 { color: #2DD4BF; }

    .comparison-card ul {
      list-style: none;
    }

    .comparison-card li {
      margin: 16px 0;
      padding-left: 32px;
      position: relative;
      color: #4a4a4a;
      line-height: 1.5;
    }

    .frustrations li::before {
      content: "‚ùå";
      position: absolute;
      left: 0;
      font-size: 1.2rem;
    }

    .solutions li::before {
      content: "‚úÖ";
      position: absolute;
      left: 0;
      font-size: 1.2rem;
    }

    .final-cta {
      background: #1a1a1a;
      color: white;
      padding: 80px 20px;
      text-align: center;
    }

    .final-cta h2 {
      color: white;
      margin-bottom: 20px;
    }

    .final-cta p {
      color: #d4d4d4;
    }

    /* Modal styles */
    .modal {
      display: none;
      position: fixed;
      z-index: 1000;
      left: 0;
      top: 0;
      width: 100%;
      height: 100%;
      background-color: rgba(0,0,0,0.6);
      backdrop-filter: blur(8px);
    }

    .modal-content {
      background-color: #ffffff;
      margin: 2% auto;
      padding: 0;
      border-radius: 24px;
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow: hidden;
      position: relative;
      box-shadow: 0 25px 50px rgba(0,0,0,0.25);
      border: 1px solid #f0f0f0;
    }

    .modal-header {
      background: #fafafa;
      padding: 32px;
      text-align: center;
      border-bottom: 1px solid #f0f0f0;
    }

    .modal-header h2 {
      color: #1a1a1a;
      margin: 0;
      font-size: 1.75rem;
      font-weight: 600;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: #f0f0f0;
      border-radius: 4px;
      margin-top: 24px;
      overflow: hidden;
    }

    .progress-fill {
      height: 100%;
      background: #2DD4BF;
      border-radius: 4px;
      transition: width 0.3s ease;
    }

    .modal-body {
      padding: 40px;
      max-height: 60vh;
      overflow-y: auto;
    }

    .quiz-step {
      display: none;
    }

    .quiz-step.active {
      display: block;
    }

    .quiz-form label {
      display: block;
      margin: 24px 0 8px 0;
      font-weight: 600;
      color: #1a1a1a;
      font-size: 1rem;
    }

    .quiz-form input, .quiz-form select, .quiz-form textarea {
      width: 100%;
      padding: 16px;
      border: 2px solid #f0f0f0;
      border-radius: 12px;
      font-size: 16px;
      font-family: 'Inter', sans-serif;
      transition: border-color 0.2s ease;
      background: #ffffff;
    }

    .quiz-form input:focus, .quiz-form select:focus, .quiz-form textarea:focus {
      outline: none;
      border-color: #2DD4BF;
      box-shadow: 0 0 0 4px rgba(45, 212, 191, 0.1);
    }

    .modal-footer {
      padding: 32px 40px;
      background: #fafafa;
      border-top: 1px solid #f0f0f0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .btn-nav {
      padding: 12px 24px;
      border: none;
      border-radius: 8px;
      font-size: 16px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      font-family: 'Inter', sans-serif;
    }

    .btn-back {
      background: #f5f5f5;
      color: #666;
    }

    .btn-back:hover {
      background: #e5e5e5;
    }

    .btn-next {
      background: #2DD4BF;
      color: white;
    }

    .btn-next:hover {
      background: #14B8A6;
      transform: translateY(-1px);
    }

    .btn-submit {
      background: #1a1a1a;
      color: white;
    }

    .btn-submit:hover {
      background: #2a2a2a;
    }

    .close {
      position: absolute;
      right: 24px;
      top: 24px;
      font-size: 24px;
      font-weight: bold;
      cursor: pointer;
      color: #999;
      z-index: 10;
      width: 32px;
      height: 32px;
      display: flex;
      align-items: center;
      justify-content: center;
      border-radius: 50%;
      transition: all 0.2s ease;
    }

    .close:hover {
      color: #1a1a1a;
      background: #f5f5f5;
    }

    @media (max-width: 768px) {
      header h1 { font-size: 2.5rem; }
      section { padding: 60px 20px; }
      .features-grid { grid-template-columns: 1fr; gap: 32px; }
      .comparison-grid { grid-template-columns: 1fr; gap: 32px; }
      .scores-grid { grid-template-columns: 1fr; }
      .modal-content { width: 95%; margin: 5% auto; border-radius: 16px; }
      .modal-body { padding: 24px 20px; }
      .modal-footer { padding: 20px; }
      .cta-buttons { flex-direction: column; align-items: center; }
    }
  </style>
</head>
<body>

  <!-- Hero Section -->
  <header>
    <h1>Fat Loss That Actually Makes Sense</h1>
    <p>Not sure where to start with your weight loss journey? Or frustrated because progress feels slow? Get daily personalised guidance that meets you where you are ‚Äî with clear, honest feedback tailored to your hormones and lifestyle.</p>
    <div class="cta-buttons">
      <a href="#" onclick="openQuiz()" class="btn btn-primary">
        <span>üìã</span> Start Free Assessment
      </a>
      <a href="#" onclick="openLogin()" class="btn btn-secondary">
        <span>üë§</span> Log In
      </a>
      <a href="#" onclick="openSignUp()" class="btn btn-secondary">
        <span>‚ú®</span> Sign Up
      </a>
    </div>
  </header>

  <!-- Why Different Section -->
  <section>
    <h2>Why Fitness Companion is Different</h2>
    <p class="section-subtitle">Unlike calorie counters or generic fitness apps, we consider your whole life - including sleep, stress, hydration, and lifestyle factors that actually impact fat loss.</p>

    <div class="features-grid">
      <div class="feature-card">
        <span class="icon">üéØ</span>
        <h3>Holistic Approach</h3>
        <p>We consider sleep, stress, hydration, movement, and nutrition together. Real fat loss happens when all factors work in harmony.</p>
      </div>
      <div class="feature-card">
        <span class="icon">üìà</span>
        <h3>Sustainable Results</h3>
        <p>No quick fixes or fad diets. We focus on building habits that last, with honest feedback on what's working and what needs attention.</p>
      </div>
      <div class="feature-card">
        <span class="icon">üí°</span>
        <h3>Personalised Insights</h3>
        <p>Daily feedback tailored to your individual circumstances, including hormonal changes and life factors that affect your progress.</p>
      </div>
    </div>
  </section>

  <!-- Daily Smart Scores -->
  <section class="scores-section">
    <h2>Your Daily Smart Scores</h2>
    <div class="scores-grid">
      <div class="score-card">
        <span class="icon">üò¥</span>
        <h3>Recovery Score</h3>
        <p>How well you're sleeping, managing stress, and allowing your body to recover.</p>
      </div>
      <div class="score-card">
        <span class="icon">ü•ó</span>
        <h3>Nutrition Score</h3>
        <p>Simple tracking of your eating patterns and hydration, with personalised tips.</p>
      </div>
      <div class="score-card">
        <span class="icon">üèÉ‚Äç‚ôÄÔ∏è</span>
        <h3>Movement Score</h3>
        <p>Track your activity levels and find the right balance for sustainable fat loss.</p>
      </div>
    </div>
  </section>

  <!-- How It Works -->
  <section>
    <h2>How It Works</h2>
    <div class="features-grid">
      <div class="feature-card">
        <span class="icon">‚ö°</span>
        <h3>1. Quick Setup</h3>
        <p>Answer a few personalisation questions to tailor your experience, including any individual considerations.</p>
      </div>
      <div class="feature-card">
        <span class="icon">üìù</span>
        <h3>2. Daily Check-ins</h3>
        <p>Log your weight, sleep, stress, food, and movement in under 2 minutes. Perfect for busy lifestyles.</p>
      </div>
      <div class="feature-card">
        <span class="icon">üîç</span>
        <h3>3. Get Honest Insights</h3>
        <p>Receive practical, personalised feedback on what's working and what needs attention in your fat loss journey.</p>
      </div>
    </div>
  </section>

  <!-- Comparison Section -->
  <section class="comparison-section">
    <h2>Tired of Feeling Lost in Your Fat Loss Journey?</h2>
    <div class="comparison-grid">
      <div class="comparison-card frustrations">
        <h3>Common Frustrations:</h3>
        <ul>
          <li>"I ate well this week but gained weight"</li>
          <li>"My hormones throw everything off track"</li>
          <li>"I don't know if I'm doing enough exercise"</li>
          <li>"Scale fluctuations make me want to give up"</li>
        </ul>
      </div>
      <div class="comparison-card solutions">
        <h3>With Fitness Companion:</h3>
        <ul>
          <li>Clear daily progress scores</li>
          <li>Personalised insights and support</li>
          <li>Honest feedback on what's really happening</li>
          <li>Sustainable, realistic approach to fat loss</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- Final CTA -->
  <section class="final-cta">
    <h2>Ready to Finally Understand Your Progress?</h2>
    <p style="font-size: 1.1rem; margin-bottom: 30px;">Join thousands of people who've found clarity in their fat loss journey with honest, personalised daily insights that actually work.</p>
    <a href="#" onclick="openQuiz()" class="btn btn-primary" style="background: white; color: #1a1a1a; font-size: 1.2rem; padding: 18px 36px; box-shadow: none;">
      <span>üöÄ</span> Start Your Questionnaire Now
    </a>
  </section>

  <!-- Multi-step Quiz Modal -->
  <div id="quizModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeQuiz()">&times;</span>

      <div class="modal-header">
        <h2 id="stepTitle">Let's Get Started</h2>
        <div class="progress-bar">
          <div class="progress-fill" id="progressFill"></div>
        </div>
      </div>

      <form method="POST" action="/" class="quiz-form" id="quizForm">
        <div class="modal-body">

          <!-- Step 1: Basic Info -->
          <div class="quiz-step active" data-step="1">
            <label for="name">What's your first name?</label>
            <input type="text" name="name" id="name" placeholder="Enter your first name" required>

            <label for="email">Email address:</label>
            <input type="email" name="email" id="email" placeholder="your@email.com" required>

            <label for="dob">Date of birth:</label>
            <input type="date" name="dob" id="dob" required>
          </div>

          <!-- Step 2: Physical Stats -->
          <div class="quiz-step" data-step="2">
            <label for="gender">Biological sex:</label>
            <select name="gender" required>
              <option value="">-- Please select --</option>
              <option value="female">Female</option>
              <option value="male">Male</option>
              <option value="other">Other / Prefer not to say</option>
            </select>

            <label for="height">Height (cm):</label>
            <input type="number" name="height" min="100" max="250" placeholder="170" required>

            <label for="weight">Current weight (kg):</label>
            <input type="number" name="weight" min="30" max="300" step="0.1" placeholder="70.0" required>

            <label for="goalWeight">Goal weight (kg) - optional:</label>
            <input type="number" name="goalWeight" min="30" max="300" step="0.1" placeholder="65.0">
          </div>

          <!-- Step 3: Goals & Motivation -->
          <div class="quiz-step" data-step="3">
            <label for="goal">What is your primary fitness goal?</label>
            <select name="goal" required>
              <option value="">-- Please select --</option>
              <option value="fat_loss">Fat loss</option>
              <option value="muscle_gain">Muscle gain</option>
              <option value="general_health">General health</option>
              <option value="mental_wellbeing">Mental wellbeing</option>
            </select>

            <label for="goalReason">Why do you want to achieve this goal?</label>
            <select name="goalReason">
              <option value="">-- Select a reason --</option>
              <option value="recent_breakup">Recent breakup</option>
              <option value="grief">Dealing with grief</option>
              <option value="confidence">Building confidence</option>
              <option value="health_scare">Health concerns</option>
              <option value="self_love">Self-love journey</option>
              <option value="other">Other</option>
            </select>

            <label for="motivation">Tell us more about your motivation:</label>
            <textarea name="motivation" placeholder="Share what's driving you to make this change..." rows="3" required></textarea>
          </div>

          <!-- Step 4: Mental & Physical State -->
          <div class="quiz-step" data-step="4">
            <label for="mentalState">Current mental/emotional state:</label>
            <textarea name="mentalState" placeholder="How are you feeling mentally and emotionally right now?" rows="2" required></textarea>

            <label for="motivationLevel">Motivation level (1-10):</label>
            <input type="range" name="motivationLevel" min="1" max="10" value="5">

            <label for="mood">How would you describe your mood most days?</label>
            <select name="mood">
              <option value="">-- Please select --</option>
              <option value="happy">Happy</option>
              <option value="neutral">Neutral</option>
              <option value="stressed">Stressed</option>
              <option value="anxious">Anxious</option>
              <option value="sad">Sad</option>
              <option value="unmotivated">Unmotivated</option>
              <option value="other">Other</option>
            </select>
          </div>

          <!-- Step 5: Health & Medications -->
          <div class="quiz-step" data-step="5">
            <label for="medications">Are you on any medications?</label>
            <select name="medications">
              <option value="">-- Please select --</option>
              <option value="no">No</option>
              <option value="yes">Yes</option>
            </select>

            <label for="medicationList">Please list your medications (if any):</label>
            <textarea name="medicationList" placeholder="List any medications you're taking..." rows="2"></textarea>

            <label for="healthConditions">Any diagnosed health conditions?</label>
            <textarea name="healthConditions" placeholder="e.g., thyroid issues, PCOS, diabetes... (optional)" rows="2"></textarea>

            <label for="menstrualCycle">Menstrual cycle status (if applicable):</label>
            <select name="menstrualCycle">
              <option value="">-- Please select or skip --</option>
              <option value="on_period">Currently on my period</option>
              <option value="approaching">Approaching my period</option>
              <option value="mid_cycle">Mid-cycle</option>
              <option value="unsure">Unsure</option>
            </select>
          </div>

          <!-- Step 6: Sleep & Recovery -->
          <div class="quiz-step" data-step="6">
            <label for="sleepHours">Average hours of sleep per night:</label>
            <input type="number" name="sleepHours" min="0" max="24" step="0.5" placeholder="7.5" required>

            <label for="wakingFeeling">How do you feel when waking up?</label>
            <select name="wakingFeeling" required>
              <option value="">-- Please select --</option>
              <option value="refreshed">Refreshed</option>
              <option value="tired">Tired</option>
              <option value="exhausted">Exhausted</option>
            </select>

            <label for="stressLevel">Weekly stress level (1-10):</label>
            <input type="range" name="stressLevel" min="1" max="10" value="5">
          </div>

          <!-- Step 7: Nutrition -->
          <div class="quiz-step" data-step="7">
            <label for="proteinSources">Typical protein sources:</label>
            <textarea name="proteinSources" placeholder="e.g., 2 chicken breasts, 1 protein shake, tofu, eggs..." rows="2" required></textarea>

            <label for="mealsPerDay">Typical number of meals/snacks per day:</label>
            <input type="number" name="mealsPerDay" min="1" max="10" placeholder="3" required>

            <label for="waterIntake">Daily water intake estimate:</label>
            <select name="waterIntake" required>
              <option value="">-- Please select --</option>
              <option value="less_than_1l">Less than 1 litre</option>
              <option value="1_to_2l">1-2 litres</option>
              <option value="2_to_3l">2-3 litres</option>
              <option value="more_than_3l">More than 3 litres</option>
            </select>

            <label for="eatingHabits">Eating habits:</label>
            <select name="eatingHabits" required>
              <option value="">-- Please select --</option>
              <option value="mostly_home_cooked">Mostly home-cooked meals</option>
              <option value="lots_of_takeaway">Lots of takeaways</option>
              <option value="mix">A mix of both</option>
            </select>
          </div>

          <!-- Step 8: Activity & Exercise -->
          <div class="quiz-step" data-step="8">
            <label for="activityLevel">Activity level:</label>
            <select name="activityLevel" required>
              <option value="">-- Please select --</option>
              <option value="sedentary">Sedentary (desk job, little exercise)</option>
              <option value="lightly_active">Lightly active (light exercise 1-3 days/week)</option>
              <option value="moderately_active">Moderately active (moderate exercise 3-5 days/week)</option>
              <option value="very_active">Very active (hard exercise 6-7 days/week)</option>
              <option value="extremely_active">Extremely active (very hard exercise, physical job)</option>
            </select>

            <label for="exerciseDetails">Exercise type/frequency:</label>
            <textarea name="exerciseDetails" placeholder="e.g., 30-min walk daily, gym 3x weekly, yoga twice a week..." rows="2" required></textarea>

            <label for="wearables">Do you use any fitness wearables?</label>
            <select name="wearables">
              <option value="">-- Please select --</option>
              <option value="apple_watch">Apple Watch</option>
              <option value="fitbit">Fitbit</option>
              <option value="garmin">Garmin</option>
              <option value="other">Other</option>
              <option value="none">None</option>
            </select>
          </div>

          <!-- Step 9: Current State & Progress -->
          <div class="quiz-step" data-step="9">
            <label for="weightChanges">Recent weight changes:</label>
            <select name="weightChanges" required>
              <option value="">-- Please select --</option>
              <option value="gained">Gained weight</option>
              <option value="lost">Lost weight</option>
              <option value="no_change">No change</option>
              <option value="not_sure">Not sure</option>
            </select>

            <label for="bodyFeeling">How do you feel in your body?</label>
            <textarea name="bodyFeeling" placeholder="Describe how you feel about your body and physical state..." rows="2" required></textarea>

            <label for="weeklyWeighIn">Would you like weekly weight check-ins?</label>
            <select name="weeklyWeighIn">
              <option value="">-- Please select --</option>
              <option value="yes">Yes, I'd like weekly reminders</option>
              <option value="no">No, I prefer not to weigh myself regularly</option>
              <option value="maybe">Maybe, I'll decide later</option>
            </select>
          </div>

          <!-- Step 10: Support & Final Questions -->
          <div class="quiz-step" data-step="10">
            <label for="supportSystem">Do you have a good support system?</label>
            <select name="supportSystem">
              <option value="">-- Please select --</option>
              <option value="yes">Yes</option>
              <option value="no">No</option>
              <option value="somewhat">Somewhat</option>
            </select>

            <label for="supportExplanation">Tell us about your support system:</label>
            <textarea name="supportExplanation" placeholder="Who supports you in your fitness journey?" rows="2"></textarea>

            <label for="aiConsent">Would you like AI-generated personalised recommendations?</label>
            <select name="aiConsent" required>
              <option value="">-- Please select --</option>
              <option value="yes">Yes, give me personalised AI insights</option>
              <option value="no">No, just show me my summary</option>
            </select>
          </div>

        </div>

        <div class="modal-footer">
          <button type="button" class="btn-nav btn-back" id="backBtn" onclick="previousStep()" style="display: none;">Back</button>
          <div style="flex: 1; text-align: center;">
            <span id="stepCounter">Step 1 of 10</span>
          </div>
          <button type="button" class="btn-nav btn-next" id="nextBtn" onclick="nextStep()">Next</button>
          <button type="submit" class="btn-nav btn-submit" id="submitBtn" style="display: none;">Create My Plan</button>
        </div>
      </form>
    </div>
  </div>

  <!-- Login Modal -->
  <div id="loginModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeLogin()">&times;</span>
      <div class="modal-header">
        <h2>Welcome Back</h2>
      </div>
      <div class="modal-body">
        <form class="quiz-form">
          <label for="loginEmail">Email address:</label>
          <input type="email" id="loginEmail" placeholder="your@email.com" required>
          <label for="loginPassword">Password:</label>
          <input type="password" id="loginPassword" placeholder="Your password" required>
          <button type="button" onclick="memberLogin()" class="btn-nav btn-submit" style="width: 100%; margin-top: 20px;">Log In</button>
        </form>
      </div>
    </div>
  </div>

  <!-- Sign Up Modal -->
  <div id="signUpModal" class="modal">
    <div class="modal-content">
      <span class="close" onclick="closeSignUp()">&times;</span>
      <div class="modal-header">
        <h2>Create Your Account</h2>
      </div>
      <div class="modal-body">
        <form class="quiz-form">
          <label for="signUpName">First Name:</label>
          <input type="text" id="signUpName" placeholder="Enter your first name" required>
          <label for="signUpEmail">Email address:</label>
          <input type="email" id="signUpEmail" placeholder="your@email.com" required>
          <label for="signUpPassword">Password:</label>
          <input type="password" id="signUpPassword" placeholder="Create a password (min 6 characters)" required>
          <label for="signUpPasswordConfirm">Confirm Password:</label>
          <input type="password" id="signUpPasswordConfirm" placeholder="Confirm your password" required>
          <button type="button" onclick="createAccount()" class="btn-nav btn-submit" style="width: 100%; margin-top: 20px;">Create Account & Start Questionnaire</button>
        </form>
      </div>
    </div>
  </div>

  <script>
    let currentStep = 1;
    const totalSteps = 10;

    const stepTitles = {
      1: "Let's Get Started",
      2: "Tell Us About Yourself",
      3: "Your Goals",
      4: "How Are You Feeling?",
      5: "Health Information",
      6: "Sleep & Recovery",
      7: "Nutrition Habits",
      8: "Activity & Exercise",
      9: "Current Progress",
      10: "Final Questions"
    };

    function openQuiz() {
      document.getElementById('quizModal').style.display = 'block';
      document.body.style.overflow = 'hidden';
      updateProgress();
    }

    function closeQuiz() {
      document.getElementById('quizModal').style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    function openLogin() {
      document.getElementById('loginModal').style.display = 'block';
      document.body.style.overflow = 'hidden';
    }

    function closeLogin() {
      document.getElementById('loginModal').style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    function openSignUp() {
      document.getElementById('signUpModal').style.display = 'block';
      document.body.style.overflow = 'hidden';
    }

    function closeSignUp() {
      document.getElementById('signUpModal').style.display = 'none';
      document.body.style.overflow = 'auto';
    }

    function nextStep() {
      if (validateCurrentStep()) {
        if (currentStep < totalSteps) {
          document.querySelector(`[data-step="${currentStep}"]`).classList.remove('active');
          currentStep++;
          document.querySelector(`[data-step="${currentStep}"]`).classList.add('active');
          updateProgress();
          updateButtons();
        }
      }
    }

    function previousStep() {
      if (currentStep > 1) {
        document.querySelector(`[data-step="${currentStep}"]`).classList.remove('active');
        currentStep--;
        document.querySelector(`[data-step="${currentStep}"]`).classList.add('active');
        updateProgress();
        updateButtons();
      }
    }

    function validateCurrentStep() {
      const currentStepElement = document.querySelector(`[data-step="${currentStep}"]`);
      const requiredFields = currentStepElement.querySelectorAll('[required]');

      for (let field of requiredFields) {
        if (!field.value.trim()) {
          field.focus();
          return false;
        }
      }
      return true;
    }

    function updateProgress() {
      const progress = (currentStep / totalSteps) * 100;
      document.getElementById('progressFill').style.width = progress + '%';
      document.getElementById('stepTitle').textContent = stepTitles[currentStep];
      document.getElementById('stepCounter').textContent = `Step ${currentStep} of ${totalSteps}`;
    }

    function updateButtons() {
      const backBtn = document.getElementById('backBtn');
      const nextBtn = document.getElementById('nextBtn');
      const submitBtn = document.getElementById('submitBtn');

      if (currentStep === 1) {
        backBtn.style.display = 'none';
      } else {
        backBtn.style.display = 'block';
      }

      if (currentStep === totalSteps) {
        nextBtn.style.display = 'none';
        submitBtn.style.display = 'block';
      } else {
        nextBtn.style.display = 'block';
        submitBtn.style.display = 'none';
      }
    }

    function memberLogin() {
      const email = document.getElementById('loginEmail').value;
      const password = document.getElementById('loginPassword').value;
      
      if (!email || !password) {
        alert('Please enter both email and password.');
        return;
      }

      // Login via backend
      const formData = new FormData();
      formData.append('email', email);
      formData.append('password', password);

      fetch('/login', {
        method: 'POST',
        body: formData
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          window.location.href = `/dashboard?email=${encodeURIComponent(email)}`;
        } else {
          alert(data.message || 'Login failed');
        }
      })
      .catch(error => {
        console.error('Error:', error);
        alert('Login failed. Please try again.');
      });
    }

    // Close modals when clicking outside
    window.onclick = function(event) {
      const quizModal = document.getElementById('quizModal');
      const loginModal = document.getElementById('loginModal');
      const signUpModal = document.getElementById('signUpModal');

      if (event.target == quizModal) {
        closeQuiz();
      }
      if (event.target == loginModal) {
        closeLogin();
      }
      if (event.target == signUpModal) {
        closeSignUp();
      }
    }

    // Keyboard navigation
    document.addEventListener('keydown', function(e) {
      if (document.getElementById('quizModal').style.display === 'block') {
        if (e.key === 'Enter' && currentStep < totalSteps) {
          e.preventDefault();
          nextStep();
        }
      }
    });

    function createAccount() {
      const name = document.getElementById('signUpName').value;
      const email = document.getElementById('signUpEmail').value;
      const password = document.getElementById('signUpPassword').value;
      const confirmPassword = document.getElementById('signUpPasswordConfirm').value;

      if (!name || !email || !password) {
        alert('Please fill in all fields.');
        return;
      }

      if (password !== confirmPassword) {
        alert('Passwords do not match.');
        return;
      }

      if (password.length < 6) {
        alert('Password must be at least 6 characters long.');
        return;
      }

      // Create account via backend
      const formData = new FormData();
      formData.append('name', name);
      formData.append('email', email);
      formData.append('password', password);

      fetch('/register', {
        method: 'POST',
        body: formData
      })
      .then(response => response.json())
      .then(data => {
        if (data.success) {
          // Pre-fill the questionnaire with name and email
          document.getElementById('name').value = name;
          document.getElementById('email').value = email;

          // Store password temporarily for questionnaire submission
          sessionStorage.setItem('tempPassword', password);

          // Close sign up modal and open questionnaire
          closeSignUp();
          openQuiz();
        } else {
          alert(data.message || 'Account creation failed');
        }
      })
      .catch(error => {
        console.error('Error:', error);
        alert('Account creation failed. Please try again.');
      });
    }
  </script>

</body>
</html>
